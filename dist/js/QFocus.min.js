/**
 *  QFocus.js   v2.0.0
 *  
 *	author: sliwey
 *  date: 2014-8-20
 *  update: 2014-10-20	
 */
!function(t){function n(n,a){var r,i,d,u,f,p,v,h,m,C,w=a.find("li"),q=w.length,x={};if(w.css("width",n.width),a.css({width:n.width,height:n.height}),!n.arrowControl||n.prevBtn||n.nextBtn||a.append("<span class='QFocus-prev'><span>&lsaquo;</span></span><span class='QFocus-next'><span>&rsaquo;</span></span>"),n.title)for(v=0;q>v;v++)p=w.eq(v),u=p.find("a").attr("title"),p.append("<p class='QFocus-title'><span>"+u+"</span></p>");for(n.navControl&&(a.append(s(q)),nav=a.find(".QFocus-nav dd")),i={"transition-duration":n.duration+"ms"},v=0;q>v;v++)w.eq(v).css(i);for(d=a.find(".QFocus-title"),f=d.length,v=0;f>v;v++)d.eq(v).css(i);if(n.arrowControl&&(h=n.prevBtn||a.find(".QFocus-prev"),m=n.nextBtn||a.find(".QFocus-next")),"fade"==n.type&&(l?w.eq(0).addClass(o):(w.addClass(o).hide(),w.eq(0).show()),C=new c.Fade,x={_this:a,obj:w,duration:n.duration},n.arrowControl&&(h.on("click",t.extend({d:0},x),C),m.on("click",t.extend({d:1},x),C))),"slide"==n.type){w.addClass(o);var F=a.children("ul"),g=w.eq(0).clone(!0),Q=w.eq(q-1).clone(!0);F.append(g),F.prepend(Q),F.addClass("slide"),F.css("width",a.width()*(q+2)),l?F.css({"transition-duration":"0s",transform:"translate3d("+-a.width()+"px, 0, 0)",left:"0"}):F.css("left",-a.width()),C=new c.Slide,x={_this:a,obj:w,duration:n.duration},n.arrowControl&&(h.on("click",t.extend({d:0},x),C),m.on("click",t.extend({d:1},x),C))}a.on("mouseenter mouseleave",function(s){var i=(t(s.relatedTarget),a.find(".QFocus-title"));"mouseenter"==s.type?(n.arrowControl&&(h.addClass(o),m.addClass(o)),i.addClass(o),clearInterval(r)):(n.arrowControl&&(h.removeClass(o),m.removeClass(o)),i.removeClass(o),r=e(C,x,n.interval))}),n.navControl&&nav.each(function(n){t(this).on("click",function(){C(t.extend({active:n},x))})}),r=e(C,x,n.interval)}function e(t,n,e){return setInterval(function(){t(n)},e)}function a(t){var n,e,a=["webkit","Moz","ms","o"],s=document.documentElement.style,r=t.split("-"),i=r.length,d=[t];if(i>1)for(n=0;i>n;n++)r[n]=r[n].charAt(0).toUpperCase()+r[n].substring(1);for(e=r.join(""),n=0;4>n;n++)d.push(a[n]+e);for(n=0;5>n;n++)if(d[n]in s)return!0;return!1}function s(t){for(var n="<div class='QFocus-nav'><dl>",e=0;t>e;e++)n+=0==e?"<dd class='selected'></dd>":"<dd></dd>";return n+="</dl></div>"}function r(t,n){var e="selected";t.find(".QFocus-nav dd").eq(n).addClass(e).siblings("dd").removeClass(e)}function i(t,n){var e,a;return-1===n?{}:(n>=t?(e=1,a=n-t):(e=0,a=t-n),{direction:e,step:a})}var d={width:600,height:300,title:!1,type:"slide",duration:500,interval:5e3,arrowControl:!0,prevBtn:null,nextBtn:null,navControl:!0},o="show",l=a("transition");t.fn.extend({QFocus:function(e){var a=t.extend({},d,e);return n(a,this),this}});var c={Fade:function(){function t(t){return m&&(n=t._this||t.data._this,s=t.obj||t.data.obj,d=s.length,c=t.duration||t.data.duration,m=!1),h=new Date,c>=h-v?!1:(v=h,u="number"==typeof t.active?t.active:-1,f=i(p,u),t.data&&0===t.data.d||0===f.direction?(C=0===f.direction?f.step:1,e=p-C,0>e&&(e=d+e),l?(s.eq(p).removeClass(o),s.eq(e).addClass(o)):(s.eq(p).fadeOut(c),s.eq(e).fadeIn(c)),p=e):(C=1===f.direction?f.step:1,a=p+C,a>=d&&(a=d-a),l?(s.eq(p).removeClass(o),s.eq(a).addClass(o)):(s.eq(p).fadeOut(c),s.eq(a).fadeIn(c)),p=a),r(n,p),void 0)}var n,e,a,s,d,c,u,f,p=0,v=0,h=0,m=!0,C=1;return t},Slide:function(){function t(t){return g&&(n=t._this||t.data._this,e=n.children("ul"),c=t.obj||t.data.obj,u=c.length,f=n.find("li"),p=f.length,C=n.width(),v=t.duration||t.data.duration,g=!1),F=new Date,v>=F-x?!1:(x=F,h="number"==typeof t.active?t.active:-1,m=i(w,h),t.data&&0===t.data.d||0===m.direction?(Q=0===m.direction?m.step:1,a=w-Q,0>a&&(a=u+a),d=q-Q,0>d&&(l?(e.css({"transition-duration":"0s",transform:"translate3d("+-C*(p-2)+"px, 0, 0)"}),e.css("transform")):e.css("left",-C*(p-2)),d=p-2-Q),l?e.css({"transition-duration":v+"ms",transform:"translate3d("+-C*d+"px, 0, 0)"}):e.animate({left:-C*d},v),w=a,q=d):(Q=1===m.direction?m.step:1,s=w+Q,s>=u&&(s=u-s),o=q+Q,o>=p&&(l?(e.css({"transition-duration":"0s",transform:"translate3d("+-C+"px, 0, 0)"}),e.css("transform")):e.css("left",-C),o=1+Q),l?e.css({"transition-duration":v+"ms",transform:"translate3d("+-C*o+"px, 0, 0)"}):e.animate({left:-C*o},v),w=s,q=o),r(n,w),void 0)}var n,e,a,s,d,o,c,u,f,p,v,h,m,C,w=0,q=1,x=0,F=0,g=!0,Q=1;return t}}}(jQuery);